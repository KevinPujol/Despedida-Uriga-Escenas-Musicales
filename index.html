<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Olga &amp; Oriol ‚Äî Escenas con im√°genes</title>
  <meta name="description" content="Cada escena se muestra con su imagen correspondiente. Orden aleatorio sin repetir por ciclo." />
  <link rel="icon" href="logo.png" type="image/png">
  <style>
:root {
      /* Paleta inspirada en la segunda imagen (web): fondos c√°lidos, texto oscuro y acento verde salvia */
      --bg: #f6f3f2;        /* fondo principal muy claro, c√°lido */
      --panel: #ffffff;     /* tarjetas/blancos */
      --accent: #6f836f;    /* verde salvia para acentos y botones */
      --text: #43312c;      /* marr√≥n oscuro/charcoal c√°lido para texto */
      --muted: #b6a9a4;     /* gris tostado para textos secundarios */
      --border: #e7e1df;    /* borde suave */
    }
    *{box-sizing:border-box}
    html,body { height: 100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
      background: var(--bg);
      color:var(--text);
      display:grid;
      place-items:center;
      padding:24px;
    }
    .card {
      width: min(960px, 100%);
      background: color-mix(in oklab, var(--panel) 86%, #faf6f4 14%);
      backdrop-filter: blur(6px) saturate(120%);
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      padding: 18px;
    }
    .head{ display:grid; justify-items:center; gap:6px; padding:6px 6px 12px }
    .brand{ display:grid; justify-items:center; gap:8px }
    .brand img { height: clamp(72px, 12vw, 160px); width: auto; display: block; object-fit: contain; }
    .topbar { display:flex; justify-content: space-between; align-items:center; width: 100%; gap: 12px; flex-wrap: wrap }
    .topbar .left { display:grid; gap:4px; max-width: 75% }
    .topbar .right { display:flex; align-items:center }
    h1 { color: var(--accent); font-size: clamp(20px, 2.2vw, 24px); margin: 0; letter-spacing: .2px }

    .scene{
      position:relative;
      margin-top:8px;
      border:1px solid var(--border);
      border-radius:14px;
      background:#fafafa;
      padding:18px;
      display:grid;
      gap:12px;
    }
    .scene-text{
      margin:0;
      font-size:clamp(1.1rem, 1rem + 1.2vw, 1.8rem); /* algo m√°s peque√±a */
      line-height:1.4;
      letter-spacing:.2px;
      color:var(--sceneText); /* gris oscuro */
      font-weight:700;
      text-align:center;
    }
    .scene-media{ display:flex; justify-content:center; align-items:center; width:100%; }
    .scene-media img{
  display:block;
  margin:0 auto;
  width:auto;
  max-width:100%;
  height:auto;            /* natural height */
  object-fit: contain;
  object-position: center;
  border-radius:12px;
  border:1px solid var(--border);
  box-shadow:0 8px 18px rgba(0,0,0,.06);
  background:#fff;
}

    .controls{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:14px }
    button{
      --pad:12px 16px;
      appearance:none; border:0; padding:var(--pad); border-radius:12px; cursor:pointer;
      font-weight:600; letter-spacing:.2px; display:inline-flex; align-items:center; gap:.55rem;
    }
    .primary { background: var(--accent); color: #ffffff }
    .secondary { background: #ffffff; color: var(--text); border: 1px solid var(--border); box-shadow: 0 1px 2px rgba(0,0,0,.06) }
    .secondary:hover { border-color: color-mix(in oklab, var(--border) 40%, var(--text) 60%); box-shadow: 0 2px 6px rgba(0,0,0,.08); transform: translateY(-1px) }
    .primary:hover { filter: brightness(1.05) }

    .progress{ display:flex; gap:8px; align-items:center; margin-top:8px; color:var(--muted); font-size:.95rem }
    .pill{ border:1px solid var(--border); padding:6px 10px; border-radius:999px; background:#fff }

    .footer { margin-top: 12px; color: #8e837f; font-size: .85rem }
.footer .love { text-align: center; }

    .fade{ animation:fade .28s ease-out both }
    @keyframes fade{ from{ opacity:.2; transform: translateY(4px) } to { opacity:1; transform:none } }
.footer a { color: inherit }
button, a.button {
      --pad: 12px 16px;
      appearance: none; border: 0; padding: var(--pad); border-radius: 12px; cursor: pointer;
      font-weight: 600; letter-spacing: .2px; text-decoration: none; display: inline-flex; align-items: center; gap: .55rem;
    }

/* === UX/UI improvements === */

/* Sticky topbar for quick access */
.topbar {
  position: sticky; top: 0; z-index: 50;
  backdrop-filter: saturate(140%) blur(6px);
  background: color-mix(in srgb, var(--panel) 80%, transparent);
  border-bottom: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
}

/* Logo compact on mobile */
@media (max-width: 640px) { .brand img { height: 72px; max-height: 72px; width: auto; } }

/* Fluid type scale */
h1 { font-weight: 700; letter-spacing: -0.01em; font-size: clamp(20px, 2.2vw, 24px); }
.scene-text { font-size: clamp(18px, 2.1vw, 22px); line-height: 1.35; }

/* Title inside card */
.scene h2, .card h2 {
  font-size: clamp(20px, 2.3vw, 28px);
  line-height: 1.25;
  max-width: 60ch;
  letter-spacing: -0.005em;
}

/* Media frame: stable ratio and height */
.scene-media{ display:flex; justify-content:center; align-items:center; width:100%; }
.scene-media img{
  display:block;
  margin:0 auto;
  width:auto;
  max-width:100%;
  height:auto;            /* natural height */
  object-fit: contain;
  object-position: center;
  border-radius:12px;
  border:1px solid var(--border);
  box-shadow:0 8px 18px rgba(0,0,0,.06);
  background:#fff;
}

/* Controls layout + sticky action bar on mobile */
.controls {
  display: flex; align-items: center; gap: 12px; flex-wrap: wrap; justify-content: space-between;
}
.progress { display: inline-flex; align-items: center; gap: 10px; margin-left: auto; }
.progress .bar {
  width: 120px; height: 6px; border-radius: 999px; overflow: hidden;
  background: color-mix(in srgb, var(--text) 10%, transparent);
}
.progress .bar .fill {
  display: block; height: 100%; width: var(--p, 0%); background: var(--accent);
  transition: width .35s ease;
  border-radius: inherit;
}

@media (max-width: 640px) {
  .controls {
    position: sticky; bottom: 0; z-index: 40;
    padding: 12px; margin: 8px -12px -8px;
    background: color-mix(in srgb, var(--panel) 92%, transparent);
    border-top: 1px solid color-mix(in srgb, var(--text) 8%, transparent);
    backdrop-filter: blur(6px);
    display: grid; grid-template-columns: 1fr; gap: 10px;
  }
  .controls .primary, .controls .secondary { width: 100%; }
  .progress { order: 3; justify-content: center; }
}

/* Focus styles */
:where(button,a.button):focus-visible {
  outline: 2px solid color-mix(in srgb, var(--accent) 70%, white);
  outline-offset: 3px; transform: translateY(-1px);
}

/* Footer love center - ensure */
.footer .love { text-align: center; }

/* Mobile centering for title and CTA; remove divider */
@media (max-width: 640px) {
  .topbar { flex-direction: column; align-items: center; justify-content: center; gap: 8px; }
  .topbar .left, .topbar .right { max-width: 100%; width: 100%; display: flex; justify-content: center; }
  .topbar .left h1 { text-align: center; }
}
/* Ensure no bottom divider on topbar across sizes */
.topbar { border-bottom: none !important; box-shadow: none !important; }

</style>
</head>
<body>
  <main class="card">
    <div class="head">
      <div class="brand">
        <img src="logo.png" alt="Olga &amp; Oriol ‚Äì 04.10.2025" onerror="this.onerror=null; this.src='logo.jpg'">
      </div>
      <div class="topbar">
        <div class="left">
          <h1>Escenas aleatorias</h1>
        </div>
        <div class="right">
          <button id="btnNext" class="primary" title="Mostrar otra escena">üîÄ Otra escena</button>
        </div>
      </div>
    </div>

    <section class="scene" aria-live="polite">
      <p id="sceneText" class="scene-text fade">Pulsa <strong>Otra escena</strong> para empezar üîÄ</p>
      <div class="scene-media">
        <img id="sceneImg" src="" alt="" class="fade" loading="lazy" decoding="async" />
      </div>
    </section>

    <div class="controls"><button id="btnRestart" class="secondary" title="Reiniciar ciclo">Reiniciar ciclo</button><div class="progress"><div class="bar"><span id="progressFill" class="fill" style="--p:0%"></span></div><div class="pill" id="counter">0 / 7</div></div></div>

    <div class="footer"><div class="love">Hecho con ‚ù§Ô∏è para Olga &amp; Oriol.</div></div>
  </main>

  <script>
    const SCENES = [
      { text: "Los padres de Uri pillan a Uri y a la secretaria en el despacho de abogados.",
        img: "padres-pillan-despacho.png",
        alt: "Padres sorprendidos en el despacho; Uri y la secretaria (con gafas) dentro." },
      { text: "La secretaria le pide a Uri que vuelva con ella y Olga se interpone.",
        img: "secretaria-pide-olga-interpone.png",
        alt: "Escena en la calle: la secretaria suplica, Olga bloquea a Uri." },
      { text: "El grupo salva las fiestas de Fontsagrada y se vuelve leyenda.",
        img: "grupo-salva-fontsagrada.png",
        alt: "Fiestas de Fontsagrada, ambiente festivo del grupo." },
      { text: "Olga recibe un sacacorchos como regalo en un restaurante, pero piensa que es un consolador.",
        img: "olga-sacacorchos-restaurante.png",
        alt: "Olga abre una caja de sacacorchos en el restaurante, Uri observa." },
      { text: "La vecina asi√°tica de Uriga se r√≠e al descubrir que no son madre e hijo.",
        img: "vecina-coreana-rie.png",
        alt: "Vecina ri√©ndose al aclararse el malentendido." },
      { text: "Uri limpia la casa rural de esp√≠ritus malignos (Tenim pipi).",
        img: "uri-limpia-casa-rural.png",
        alt: "Uri espantando esp√≠ritus en una casa rural." },
      { text: "Mar√≠a, Uri y Kevin entran al cuarto oscuro de Arena.",
        img: "maria-uri-kevin-cuarto-oscuro.png",
        alt: "Entrada al cuarto oscuro de Arena." },
      { text: "Olga acaba en el hospital por exceso de cloro, le vendan los ojos y parece una mosca.",
        img: "olga-hospital-cloro-mosca.png",
        alt: "Olga parece una mosca." }
    ];

    const elText = document.getElementById("sceneText");
    const elImg = document.getElementById("sceneImg");
    const elCounter = document.getElementById("counter");
    const btnNext = document.getElementById("btnNext");
    const elProgressFill = document.getElementById("progressFill");
    const btnRestart = document.getElementById("btnRestart");let queue = [];
    let shownThisRound = 0;

    function shuffleInPlace(arr){
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function startNewRound(){
      queue = shuffleInPlace([...SCENES.keys()]);
      shownThisRound = 0;
      updateHud();
    }

    function updateHud(){
      elCounter.textContent = `${shownThisRound} / ${SCENES.length}`;
      if(elProgressFill){
        const p = Math.max(0, Math.min(100, Math.round(shownThisRound/SCENES.length*100)));
        elProgressFill.style.setProperty("--p", p + "%");
        elProgressFill.style.width = p + "%";
      }
    }

    function setScene(scene){
      for (const el of [elText, elImg]) { el.classList.remove('fade'); void el.offsetWidth; }

      elText.textContent = scene.text;
      elImg.alt = scene.alt || scene.text;

      elImg.onerror = () => { elImg.style.display = 'none'; };
      elImg.onload = () => { elImg.style.display = 'block'; };
      elImg.src = scene.img;

      elText.classList.add('fade');
      elImg.classList.add('fade');
    }

    function showNext(){
      if(queue.length === 0){
        startNewRound();
      }
      const idx = queue.shift();
      const scene = SCENES[idx];
      shownThisRound += 1;
      updateHud();
      setScene(scene);
    }

    function restart(){
      startNewRound();
      showNext();
    }

    btnNext.addEventListener("click", showNext);
    btnRestart.addEventListener("click", restart);

    (function preload(){
      SCENES.forEach(s => { const im = new Image(); im.src = s.img; });
    })();

    startNewRound();
    showNext();
  </script>
</body>
</html>
